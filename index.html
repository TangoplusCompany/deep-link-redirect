<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>TangoQ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 50px;
        }
        #content {
            display: none;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="content">
        <p>앱을 열 수 없습니다. 앱 스토어로 이동하시겠습니까?</p>
        <button id="openStoreBtn">확인</button>
    </div>
<p>앱을 열지 못했다면 <a href="#" id="retryLink">여기를 클릭</a>해주세요.</p>
    <script>
        const appScheme = 'tangoplus://tangoq';
        const appStoreURL = 'https://play.google.com/store/apps/details?id=com.tangoplus.tangoq';

        function openApp() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            const isAndroid = /android/i.test(userAgent);
            
            if (!isAndroid) {
                alert("앱을 설치하지 않았거나 지원되지 않는 기기입니다.");
                return;
            }

            const pathSegments = window.location.pathname.split('/').filter(segment => segment.length > 0);
            if (pathSegments.length === 0) {
                alert("잘못된 링크입니다.");
                return;
            }

            const fullAppScheme = `${appScheme}/${pathSegments.join('/')}`;

            if (confirm("앱을 여시겠습니까?")) {
                let startTime = Date.now();
                window.location.href = fullAppScheme;

                setTimeout(() => {
                    if (Date.now() - startTime < 1500) {
                        document.getElementById('content').style.display = 'block';
                    }
                }, 1500);
            }
        }

        document.getElementById('openStoreBtn').addEventListener('click', function() {
            window.location.href = appStoreURL;
        });

        window.onload = openApp;
    </script>
</body>
</html>
